<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">





<head>
  <!-- No canonical for now
  <link rel="canonical" href="/" />
  -->
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8" /> <title>A heatmap for all your runs in RunKeeper</title> <meta name="author" content="Bruno Sánchez-Andrade Nuño - brunosan" />

	<!-- Google fonts -->
	<link href='http://fonts.googleapis.com/css?family=Oxygen|Arvo' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Economica:400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Lustria' rel='stylesheet' type='text/css'>

   <!--Google Plus  -->
   <link href="https://plus.google.com/114359371386539617196" rel="publisher" />
   
   <!-- Syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Main CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

	<!-- JQuery -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="/js/footnote-popup.js"></script>
	<script type="text/javascript" src="/js/tinybox.js"></script>
   <!-- Google Analytics -->
   <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33215020-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();


</script>

  <!-- Facebook -->
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=159289677540507";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

  <!-- RSS announce -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://brunosan.eu/feed.xml">

</head>
<body>

<table>
	<tr><td>
	<header>
		<h1><a href="/index.html">Saepe cadendo</a></h1>
		<p>by <a href="/about">brunosan</a></p>
	</header>
  <nav>
    <ul>
	  	  	<li><a href="/archives.html">Archive</a></li>
	  		<li><a href="/about">About</a></li>
        <li><a href="http://twitter.com/brunosan">Twitter </a></li>
	  	  	<li><a href="http://brunosan.github.com/cv/">C.V.</a></li>
		</ul>

    
<div id="ad">
<script type="text/javascript"><!--
  google_ad_client = "ca-pub-5329469040290415";
  /* brunosan.eu */
  google_ad_slot = "0978857405";
  google_ad_width = 120;
  google_ad_height = 240;
  //-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</div>



    </nav>

	<article>
		
		
<div id="post-" class="post">
  <h2>A heatmap for all your runs in RunKeeper</h2>
  <div id="post_content">
    <p>This is a map of 2 years running around Washington DC with
<a href="http://www.runkeeper.com">RunKeeper</a>.</p>

<iframe width='100%' height='500' frameBorder='1px'
src='http://a.tiles.mapbox.com/v3/gai.map-ticb4ks9.html#12/38.913/-77.046'></iframe>


<p>  I always wanted to make a [heat]map with all my tracks. I finally got some time to play with
  <a href="http://www.tilemill.com">TileMill</a> and <a href="http://www.mapbox.com">Mapbox</a> to
make it. The map above is the result, and these are the steps to make
your own:
  <!--more--></p>

<ol>
<li>Run a few routes :)</li>
<li>Get your data from RunKeeper.</li>
<li>Import in TileMile</li>
<li>Style at will.</li>
<li>Use Mapbox for hosting and base layer.</li>
</ol>


<h3>Get your data</h3>

<p>  Click on &ldquo;export data&rdquo; <a href="http://runkeeper.com/exportDataForm">link</a> under <em>Settings</em> page in RunKeeper. Select the dates, you might want all your data so just select a wide range. You´ll get the link on your email in a few minutes.</p>

<p>  <img src="/media/Runkeeper-export2.jpg" width="100%"></p>

<h3>Import your tracks into TileMile</h3>

<p>You need first to export the gpx tracks into a Shapefile. I got some
<a href="http://support.mapbox.com/discussions/tilemill/1331-gpx-to-sqlite">help</a> from the awesome people at Mapbox and it turns to be as simple as:</p>

<p>Then append the rest of the files in the folder:</p>

<p>You will have new folder that contains shapefiles with tracks for each
race, and also another shapefile with all measured positions
(trackpoints). I´ll only use the tracks.</p>

<p>In TileMill (available for free <a href="http://www.mapbox.com/tilemill">here</a>) create a new project.
Then click on add layer, select the shapefile with the tracks, and click
&ldquo;style and save&rdquo;.</p>

<p><img width="100%" src="/media/TileMill-addlayer.jpg" ></p>

<h3>Style at will.</h3>

<p>My idea here was to create a heatmap for the routes. The closest thing I
could think in TileMill is to style the tracks with a wide and very
transparent trace. E.g. with a transparency of 0.2 you need 5 tracks to
get a completely opaque trace.</p>

<p>You can, and should (it´s fun!) play with the styles. I ended up styling
them as blood arteries, with a green shade around. Zoomed out you get
the heatmap idea, and if you zoom in, you can see all the individual
tracks. This gives a funny highway aspects to places I tend to use a
lot. Here is the style I used:</p>

<p>The trick to add more than one styling to the track is to use <code>::</code> like
in <code>track::glow</code></p>

<p>Note that I am not putting any base map. The reason is that I want to
add one of the basemaps MapBox provides. More on this later. While
styling you might want to add some background, you can do that
activating the MapBox streets layer plugin (under settings) or adding
a quick style only while you play with the styling:</p>

<p>To activate the tooltip when you put the mouse over the track, you need
to go to the &ldquo;Templates&rdquo; tab (the icon with the hand), then &ldquo;Teaser&rdquo;.
Use the drop-down menu to select the only layer (&ldquo;tracks&rdquo;) as the source
of data and, under Content write the text. In my case I just use the
<em>name</em> column in the shapefiles: <code>}</code></p>

<h3>Use Mapbox for hosting and base layer.</h3>

<p>Once styled, it´s very easy to host this layer online with MapBox. I´ll
also use Mapbox to add a nice base map.</p>

<p>To upload it, you need to authenticate with MapBox under Setting in
TileMill.</p>

<p><img width="100%" src="/media/TileMill-settings.jpg"></p>

<p>Once done, you only need to Click on <em>Export</em> &ndash;> <em>Upload</em>. In the setting window select the area you want to
render tiles, the center by default and available zoom levels. The
bigger the area, and the smaller the zoom level, the longer it will take
to process. Areas scale exponentially, so keep it small.</p>

<p>Once finished, you can see it on your MapBox Account. Make a New Map,
and click on <em>Add a New Layer</em> to add you track´s layer.</p>

<p><img width="100%" src="/media/layers-tilemill.jpg"></p>

<p>For the base map, MapBox offers quite some options. My idea here was
something plain, to let the heatmap shine, so I chose &ldquo;Light&rdquo;. You can still
style the color palette at will to get exactly what you want, and even
add markers if you want.</p>

<p>Last step, once saved, it´s to embed it. You only need to click on the
share button.</p>

<p>If you end up making a map with your runs, please send over a link,
it´d be great to see it.</p>

<p>Happy styling!</p>

  </div>



<p><time>20 July 2012
•
<a id="pull-request-btn" class="btn" href="https://github.com/brunosan/brunosan.eu/edit/master/_posts/2012-07-20-a-heatmap-for-all-your-runs-in-runkeeper.md">
	            Send edit request
	        </a><a href="/2012/07/01/jekyll-pull-requests/">What is this?</a>
	</time>
	
        <div class='button share-links'>
          <ul>
            <li><a href="https://twitter.com/share" class="twitter-share-button" data-url="//2012/07/20/a-heatmap-for-all-your-runs-in-runkeeper/" data-via="brunosan">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            <li><div class="fb-like" data-width="0" data-href="//2012/07/20/a-heatmap-for-all-your-runs-in-runkeeper/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div>
            <li><g:plusone annotation="none" size="medium" href="//2012/07/20/a-heatmap-for-all-your-runs-in-runkeeper/"></g:plusone>
          </ul>
          </div>
 </p>
                                                                    
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'brunosan'; // required: replace example with your forum shortname
    //var disqus_url = '//2012/07/20/a-heatmap-for-all-your-runs-in-runkeeper/';
    //var disqus_developer = 1; // developer mode is on

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<p>
<div id="related-posts">
  <h3>You might also like</h3>
  <div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/09/14/migration-in-progress//" target="_top">
          Migration in progress
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/07/25/power-searching-with-google//" target="_top">
          Power Searching with Google
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/07/15/Next-steps-in-Open-Data//" target="_top">
          Next Steps in Open Data
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/07/07/contraportada-de-el-comercio//" target="_top">
          Contraportada de El Comercio
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/07/04/Higgs-Bosson-cartoon//" target="_top">
          Higgs Bosson cartoon
        </a>
      </div>
    </div>
  
  </div>
</div>

<h4 class="more">
	<a href="/archives.html">MORE ARTICLES IN THE ARCHIVE →</a>
</h4>



</div>

	
	</article>
	
	<footer>
		<p>Non vi, <em>sed saepe cadendo</em>.</p>

		<p>

    <a href="/index.html">Home</a> •
		<a href="/archives.html">Archive</a> •
    <a href="http://feeds.feedburner.com/brunosan/site">RSS</a> •
    <a href="http://twitter.com/brunosan">Twitter </a> •
    <a href="https://plus.google.com/114359371386539617196/posts">Google+ </a> •
		<a href="http://www.flickr.com/photos/nasonurb/">Flickr </a> •
		<a href="https://github.com/brunosan">Github </a> •
		<a href="http://www.linkedin.com/profile/view?id=20589360&locale=en_US&trk=tab_pro">C.V.</a>
		</p>

        Powered by <a href="http://github.com/mojombo/jekyll"> Jekyll </a> and <a href="http://www.github.com"> Github</a> [<a href="https://github.com/brunosan/brunosan.eu">Fork me</a>]. (cc) 2004-2012. See <a href="/License">license</a> for details.</p>
	</footer>

	<div id="feedback">
		<a  onclick="TINY.box.show({iframe:'/feedback/',boxid:'frameless',width:350,height:250,fixed:false,maskid:'bluemask',maskopacity:40,closejs:function(){closeJS()}})">Feedback</a>
	</div>
</td></tr>
</table>

<!-- Google Plus -->
<script type="text/javascript">
 (function() {
 var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
 po.src = 'https://apis.google.com/js/plusone.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
 })();
</script>

</body>
</html>

